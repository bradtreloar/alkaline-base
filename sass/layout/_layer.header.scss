
// Defaults
$header-layer-background: $black !default;
$header-layer-color: $white !default;
$navbar-background: $header-layer-background !default;
$navbar-color: $header-layer-color !default;
$admin-toolbar-height: 39px !default;
$admin-toolbar-tray-height: 40px !default;


@mixin alkaline-header-region {
  display: flex;
  flex-direction: row;
  flex-grow: 1;
  height: 100%;
        
  .block {
    align-items: center;
    display: flex;
    height: 100%;
  }
}

.layer.header {
  color: $header-layer-color;
  background-color: $header-layer-background;
  fill: $header-layer-color; // for SVG icons
  width: 100%;

  &.fixed {
    position: fixed;
    // position: absolute; //@debug
    top: 0;
    transition: top 300ms ease;
    z-index: 1;

    body.toolbar-horizontal &,
    body.toolbar-vertical & {
      padding-top: 39px;
    }

    body.toolbar-horizontal.toolbar-tray-open & {
      padding-top: 79px;
    }
  }

  // wrapper
  > div {
    height: $top-bar-height;
    display: flex;
    justify-content: space-between;
    margin: 0 auto;
    max-width: 1080px;
    position: relative;

    .region {
      &.header {
        @include alkaline-header-region;
        justify-content: space-between;
        
        @include breakpoint(large) {
          justify-content: flex-start;
        }
      }

      &.navbar {
        background: $navbar-background;
        color: $navbar-color;
        height: 100%;
        // overflow-x: hidden; // @bug this rule causes dropdown submenus to be hidden
        padding-top: $top-bar-height;
        position: fixed;
        right: 0;
        // transition: width 300ms;
        top: 0;
        z-index: -1; // under the header
        
        & {
          width: 0;
          pointer-events: none;
        }

        &.active {
          width: 320px;
          pointer-events: all;
        }

        body.toolbar-horizontal &,
        body.toolbar-vertical & {
          padding-top: $top-bar-height + $admin-toolbar-height;
        }
    
        body.toolbar-horizontal.toolbar-tray-open & {
          padding-top: $top-bar-height + $admin-toolbar-height + $admin-toolbar-tray-height;
        }
        
        // Convert to a header region.
        @include breakpoint(large) {
          @include alkaline-header-region;
          justify-content: flex-end;
          pointer-events: all;
          position: static;
          width: auto;
          z-index: 1; // above the header

          // Forcefully override toolbar padding.
          padding-top: 0 !important;
        }
      }
      
      &.buttons {
        @include alkaline-header-region;
        flex: none;
      }

      // Navbar blocks need to inherit the region's background color
      > .block {
        background: inherit;
      }
    }
  }
}